<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>JellyStore</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>

html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    -ms-overflow-style: none;
    scrollbar-width: none;
    background: #f9f9f9;
}

.bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: white;
    display: flex;
    justify-content: space-around;
    align-items: center;
    padding: 4px 0;
    border-top: 1px solid #e0e0e0;
    box-shadow: 0 -2px 8px rgba(0,0,0,0.1);
    z-index: 1000;
}

.nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 2px 4px;
    border: none;
    background: none;
    cursor: pointer;
    opacity: 0.6;
    transition: all 0.3s ease;
    flex: 1;
    text-align: center;
}

.nav-item.active {
    opacity: 1;
    color: #E491A6;
}

.nav-icon {
    width: 28px; /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–ª—è –≤—Å–µ—Ö –∫–∞—Ä—Ç–∏–Ω–æ–∫ */
    height: 28px;
    object-fit: contain; /* –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏, –Ω–µ –æ–±—Ä–µ–∑–∞–µ—Ç */
    margin-bottom: 2px;
    margin-top: 8px;
    opacity: 0.6;
    transition: all 0.3s ease;
}

.nav-item.active .nav-icon {
    opacity: 1;
    filter: brightness(0) saturate(100%) invert(67%) sepia(12%) saturate(1233%) hue-rotate(295deg) brightness(95%) contrast(85%);
}

@media (max-width: 768px) {
    .bottom-nav {
        padding: 3px 0;
    }
    
    .nav-icon {
        width: 24px;
        height: 24px;
    }
    
}

.product-card {
    border: 1px solid #ddd;
    border-radius: 16px;
    padding: 15px;
    background: white;
    text-align: left;
    width: 100%;
    box-sizing: border-box;
}

.product-card img {
    width: 100%;
    height: 140px;
    object-fit: cover;
    border-radius: 16px;
}

.product-card h2 {
    margin: 10px 0px 8px 0px;
    font-weight: 600;
    font-size: 16px;
}

.opis {
    color: #666;
    font-size: 14px;
    line-height: 1.4;
    margin: 0 0 25px 0;
    
}

.price-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 10px;
    font-size: 14px;
}

.buy-button {
    width: 32px;
    height: 32px;
    background: #E491A6;
    border: none;
    border-radius: 8px;
    color: #fff;
    font-size: 25px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}

.buy-button:hover {
    background: #D48297;
}

.buy-button:active {
    background: #C57388;
    transform: scale(0.95);
}

.two-card-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-bottom: 20px;
    width: 100%;
    max-width: 375px;
}

.product-grid {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    padding: 20px;
}

body {
    background: #f9f9f9;
    margin: 0;
    padding: 0;
}

.banner {
    background-color: #845673;
    color: white;
    width: 100%;
    height: 280px;
    margin: 0;
}

.bannercen {
    width: 375px;
    height: 280px;
    margin: 0 auto; 
    display: block; 
}
 
.banner h1 {
    margin: 0px 0;
    font-size: 26px;
}

.banner p {
    margin: 0;
    font-size: 12px;
    color: #A2A2A2;
}

.banner button {
    color: white;
    background: #E491A6;
    border: none;
    padding: 5px 10px;
    border-radius: 20px;
    font-weight: bold;
    font-size: 14px;
    cursor: pointer;
    margin-top: 20px;
     border-radius: 5px;
}

.banner button:hover {
    background-color: #D48297; 
    transform: translateY(-2px); 
    cursor: pointer;
}

.banner button:active {
    background-color: #C57388;
    transform: translateY(0); /* –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–∞ –º–µ—Å—Ç–æ */
}

.search-form {
    display: none;
}


.loading {
    text-align: center;
    padding: 20px;
    font-size: 16px;
}

.hidden {
    display: none;
}

html {
    -webkit-overflow-scrolling: touch;
}

button, .product-card {
    -webkit-tap-highlight-color: transparent;
}

.infban{
    padding: 60px 20px;
}

.poisk{
  display: flex;
    align-items: center;
    justify-content: center; 
    width: 100%;
    margin-top: 20px;
    gap: 10px;
}

.poisk button{
    width: 52px;
    height: 52px;
    background-color: #E491A6; 
    background-image: url('poisk.png'); 
    background-repeat: no-repeat;
    background-position: center;
    background-size: 24px 24px; 
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.poisk button:hover {
    background-color: #D48297; 
    transform: translateY(-2px); 
    box-shadow: 0 4px 12px rgba(228, 145, 166, 0.3); 
    cursor: pointer;
}

.poisk button:active {
    background-color: #C57388;
    transform: translateY(0); 
}

.poisk input{
background-color: #845673;
height: 52px;
width: 260px;
border: none;
border-radius: 12px;
color: #fff;
padding: 0 15px;
}

.poisk input::placeholder {
    color: #ffffff;
    opacity: 0.8; 
}

.poisk input:focus {
    outline: 2px solid #E491A6;
}

.cater {
    padding: 15px 20px;
    margin-top: 20px;
}

.categories-container {
    position: relative;
    width: 100%;
    max-width: 375px;
    margin: 0 auto;
}

.categories-scroll {
    display: flex;
    gap: 10px;
    overflow-x: auto; /* –í–ö–õ–Æ–ß–ê–ï–¢ –ì–û–†–ò–ó–û–ù–¢–ê–õ–¨–ù–£–Æ –ü–†–û–ö–†–£–¢–ö–£ */
    scroll-behavior: smooth;
    padding: 10px 5px; /* –î–û–ë–ê–í–¨–¢–ï –ë–û–ö–û–í–´–ï –û–¢–°–¢–£–ü–´ */
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    cursor: grab;
        /* –î–û–ë–ê–í–¨–¢–ï –≠–¢–ò –°–¢–†–û–ö–ò */
    width: 100%;
    min-width: 0;
}

.categories-scroll:active {
    cursor: grabbing;
}

.categories-scroll::-webkit-scrollbar {
    display: none;
}

.category-btn {
    flex: 0 0 auto; /* –í–ê–ñ–ù–û: –Ω–µ –¥–∞–µ—Ç –∫–Ω–æ–ø–∫–∞–º —Å–∂–∏–º–∞—Ç—å—Å—è */
    padding: 10px 20px;
    background: #845673;
    color: white;
    border: none;
    border-radius: 20px;
    font-size: 14px;
    cursor: pointer;
    white-space: nowrap;
    transition: all 0.3s ease;
    
    /* –î–ª—è iOS */
    -webkit-user-select: none;
    user-select: none;
}

.category-btn:hover {
    background: #734562;
    transform: translateY(-2px);
}

.category-btn.active {
    background: #E491A6;
    font-weight: 600;
}

/* –£–î–ê–õ–ò–¢–ï –í–ï–°–¨ –≠–¢–û–¢ –ë–õ–û–ö */
/*
.scroll-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 32px;
    height: 32px;
    background: #E491A6;
    border: none;
    border-radius: 50%;
    color: white;
    font-size: 18px;
    cursor: pointer;
    z-index: 10;
    display: none;
}

.scroll-left {
    left: -15px;
}

.scroll-right {
    right: -15px;
}

.categories-container:hover .scroll-btn {
    display: block;
}
*/

@media (max-width: 480px) {
    .cater {
        padding: 10px 15px;
    }
    
    .category-btn {
        padding: 8px 16px;
        font-size: 13px;
    }
    
    /* –£–î–ê–õ–ò–¢–ï –≠–¢–ò –°–¢–ò–õ–ò */
    /*
    .scroll-btn {
        width: 28px;
        height: 28px;
        font-size: 16px;
    }
    
    .scroll-left {
        left: -10px;
    }
    
    .scroll-right {
        right: -10px;
    }
    */

}

</style>
</head>
<body>

    <div class="banner">
        <div class="bannercen">
        <div class="infban">
            <p>–¢–≤–æ–π –º–∞–≥–∞–∑–∏–Ω –∑–∞–∫—É—Å–æ–∫</p>
            <h1>JellyStore</h1>
            <button>–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
        </div>
        </div>
    </div>

    <div class="poisk">
        <input type="text" placeholder="–ü–æ–∏—Å–∫">
        <button></button>
    </div>

    <div class="cater">
    <div class="categories-container">
        <div class="categories-scroll" id="categoriesScroll">

        </div>
    </div>
    </div>

    <div id="status">–û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</div>
    
    <div id="product-grid" class="product-grid">

    </div>
    
    <div id="loading" class="loading hidden">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤...</div>
    
    <div id="no-more" class="loading hidden">‚úÖ –¢–æ–≤–∞—Ä—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å!</div>

<nav class="bottom-nav">
    <div class="nav-item active">
        <img src="icon/home.png" alt="–ì–ª–∞–≤–Ω–∞—è" class="nav-icon">
    </div>
    <div class="nav-item">
        <img src="icon/kat.png" alt="–ö–æ—Ä–∑–∏–Ω–∞" class="nav-icon">
    </div>
    <div class="nav-item">
        <img src="icon/prof.png" alt="–ü—Ä–æ—Ñ–∏–ª—å" class="nav-icon">
    </div>
</nav>
    
   <script>

    const API_BASE_URL = 'http://localhost:5000';

    Telegram.WebApp.ready();
    
    const tg = window.Telegram.WebApp;
    const initData = tg.initData;
    
    async function sendInitDataToBackend() {
        try {
            const statusElement = document.getElementById('status');
            statusElement.textContent = '–û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä...';
            
            const response = await fetch(`${API_BASE_URL}/api/data`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    initData: initData
                })
            });
            
            if (!response.ok) {
                throw new Error(`–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: ${response.status}`);
            }
            
            const result = await response.json();
            
            if (result.status === 'success') {
                statusElement.textContent = '‚úÖ –î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!';
                statusElement.style.color = 'green';
                
                tg.expand();
                tg.enableClosingConfirmation();
                
            } else {
                throw new Error(result.error || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞');
            }
            
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞:', error);
            const statusElement = document.getElementById('status');
            statusElement.textContent = '‚ùå –û—à–∏–±–∫–∞: ' + error.message;
            statusElement.style.color = 'red';
            
            const retryButton = document.createElement('button');
            retryButton.textContent = '–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É';
            retryButton.onclick = sendInitDataToBackend;
            document.body.appendChild(retryButton);
        }
    }
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', function() {
        if (!initData) {
            document.getElementById('status').textContent = '‚ùå –û—à–∏–±–∫–∞: –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ—Ç Telegram';
            return;
        }
        
        sendInitDataToBackend();
    });

    // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
    let currentPage = 1;
    let isLoading = false;
    let hasMore = true;
    // let currentSearch = '';
    // let currentCategory = ''; –¥–ª—è –ø–æ–∏—Å–∫–∞  –ø–æ–∫–∞ –Ω–µ –Ω—É–∂–Ω–æ

    // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ (–¢–ê, –ö–û–¢–û–†–£–Æ –í–´ –ü–û–ö–ê–ó–ê–õ–ò)
    function loadProducts(reset = false) {
    if (isLoading || !hasMore) return;
    
    if (reset) {
        currentPage = 1;
        hasMore = true;
        document.getElementById('product-grid').innerHTML = '';
        document.getElementById('no-more').classList.add('hidden');
    }
    
    isLoading = true;
    document.getElementById('loading').classList.remove('hidden');
    
    let url = `${API_BASE_URL}/api/products?page=${currentPage}`;
    
    // –î–æ–±–∞–≤–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
    // if (currentCategory) {
    //     url += `&category=${currentCategory}`;
    // }
    // if (currentSearch) {
    //     url += `&search=${encodeURIComponent(currentSearch)}`;
    // }
    
    fetch(url)
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                const productGrid = document.getElementById('product-grid');
                
                if (reset && data.products.length === 0) {
                    productGrid.innerHTML = '<p style="text-align: center; width: 100%;">–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>';
                    return;
                }
                
                // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º —Ç–æ–≤–∞—Ä—ã –ø–æ 2 —à—Ç—É–∫–∏ –∏ —Å–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
                for (let i = 0; i < data.products.length; i += 2) {
                    const twoProducts = data.products.slice(i, i + 2);
                    const container = createTwoCardContainer(twoProducts);
                    productGrid.appendChild(container);
                }
                
                hasMore = data.has_more;
                currentPage++;
                
                if (!hasMore && data.products.length > 0) {
                    document.getElementById('no-more').classList.remove('hidden');
                }
            } else {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', data.error);
            }
        })
        .catch(error => {
            console.error('–û—à–∏–±–∫–∞:', error);
        })
        .finally(() => {
            isLoading = false;
            document.getElementById('loading').classList.add('hidden');
        });
}


    function loadCategories() {
    fetch(`${API_BASE_URL}/api/categories`)
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                createCategoryButtons(data.kater);
            } else {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:', data.error);
                // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –µ—Å–ª–∏ API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
                createTestCategories();
            }
        })
        .catch(error => {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:', error);
            createTestCategories();
        });
}

    // –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–∞
    function createProductCard(product) {
        const card = document.createElement('div');
        card.className = 'product-card';
        
        card.innerHTML = `
            ${product.image_url ? 
                `<img src="${product.image_url}" alt="${product.name_tov}" class="product-image">` : 
                '<div style="height: 200px; background: #f0f0f0; display: flex; align-items: center; justify-content: center;">üì∑ –ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>'
            }
            <h2>${product.name_tov}</h2>
            <p class='opis'>${product.discript_tov ? product.discript_tov.substring(0, 50) + '...' : '–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è'}</p>
            <div class="price-container"><strong>–¶–µ–Ω–∞:<br> ${product.price ? product.price + ' —Ä—É–±.' : '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}</strong>  
                <button class="buy-button" onclick="addToCart(${product.id})">+</button>
            </div>
        `;
        
        return card;
    }

function createCategoryButtons(categories) {
    const container = document.getElementById('categoriesScroll');
    
    // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    container.innerHTML = '';
    
    // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É "–í—Å–µ"
    const allButton = document.createElement('button');
    allButton.className = 'category-btn active';
    allButton.textContent = '–í—Å–µ';
    allButton.onclick = () => filterProductsByCategory('');
    container.appendChild(allButton);
    
    // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
    categories.forEach(category => {
        const button = document.createElement('button');
        button.className = 'category-btn';
        button.textContent = category.name || category.title || '–ö–∞—Ç–µ–≥–æ—Ä–∏—è';
        button.onclick = () => filterProductsByCategory(category.id);
        container.appendChild(button);
    });
}

    // –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å –¥–≤—É–º—è –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏
    function createTwoCardContainer(products) {
        const container = document.createElement('div');
        container.className = 'two-card-container';
        
        const firstProduct = products[0];
        const secondProduct = products[1];
        
        if (firstProduct) {
            const card1 = createProductCard(firstProduct);
            container.appendChild(card1);
        }
        
        if (secondProduct) {
            const card2 = createProductCard(secondProduct);
            container.appendChild(card2);
        }
        
        return container;
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É (–ù–£–ñ–ù–û –î–û–ë–ê–í–ò–¢–¨!)
    // function addToCart(productId) {
    //     // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É
    //     console.log('–î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É:', productId);
        
    //     // –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
    //     const button = event.target;
    //     button.style.background = '#4CAF50';
    //     button.textContent = '‚úì';
        
    //     setTimeout(() => {
    //         button.style.background = '#E491A6';
    //         button.textContent = '+';
    //     }, 1000);
    // }

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
    window.addEventListener('scroll', () => {
        const { scrollTop, scrollHeight, clientHeight } = document.documentElement;
        
        if (scrollTop + clientHeight >= scrollHeight - 100) {
            loadProducts();
        }
    });

    // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', () => {
    loadProducts(true);
    loadCategories();
});


function filterProductsByCategory(categoryId) {
    // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
    document.querySelectorAll('.category-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ —Ç–µ–∫—É—â–µ–π –∫–Ω–æ–ø–∫–µ
    event.target.classList.add('active');
    
    currentCategory = categoryId;
    currentSearch = '';
    
    // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–≤–∞—Ä—ã —Å —Ñ–∏–ª—å—Ç—Ä–æ–º
    loadProducts(true);
}

function createTestCategories() {
    const testCategories = [
        { id: 1, name: '–°–ª–∞–¥–æ—Å—Ç–∏' },
        { id: 2, name: '–ù–∞–ø–∏—Ç–∫–∏' },
        { id: 3, name: '–ß–∏–ø—Å—ã' },
        { id: 4, name: '–ü–µ—á–µ–Ω—å–µ' },
        { id: 5, name: '–®–æ–∫–æ–ª–∞–¥' }
    ];
    
    createCategoryButtons(testCategories);
}

document.addEventListener('DOMContentLoaded', function() {
    const navItems = document.querySelectorAll('.nav-item');
    
    navItems.forEach(item => {
        item.addEventListener('click', function() {
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            navItems.forEach(navItem => {
                navItem.classList.remove('active');
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ –Ω–∞–∂–∞—Ç–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É
            this.classList.add('active');
            
            // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
            const tabName = this.getAttribute('data-tab');
            switchTab(tabName);
        });
    });
});

// –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –≤ –≤–∞—à —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π JavaScript
function initHorizontalScroll() {
    const scrollContainer = document.getElementById('categoriesScroll');
    
    if (!scrollContainer) return;
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–ª–µ—Å–∏–∫–∞ –º—ã—à–∏ –¥–ª—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞
    scrollContainer.addEventListener('wheel', (event) => {
        event.preventDefault();
        scrollContainer.scrollLeft += event.deltaY;
    });
}

// –í—ã–∑–æ–≤–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
document.addEventListener('DOMContentLoaded', () => {
    loadProducts(true);
    loadCategories();
    initHorizontalScroll(); // –î–æ–±–∞–≤—å—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É
});

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –º—ã—à–∫–æ–π
function initDragScroll() {
    const scrollContainer = document.getElementById('categoriesScroll');
    
    if (!scrollContainer) return;
    
    let isDragging = false;
    let startX;
    let scrollLeft;
    
    // –ù–∞—á–∞–ª–æ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
    scrollContainer.addEventListener('mousedown', (e) => {
        isDragging = true;
        startX = e.pageX - scrollContainer.offsetLeft;
        scrollLeft = scrollContainer.scrollLeft;
        scrollContainer.style.cursor = 'grabbing';
        scrollContainer.style.userSelect = 'none';
    });
    
    // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
    scrollContainer.addEventListener('mouseleave', () => {
        if (isDragging) {
            isDragging = false;
            scrollContainer.style.cursor = 'grab';
            scrollContainer.style.userSelect = 'auto';
        }
    });
    
    scrollContainer.addEventListener('mouseup', () => {
        if (isDragging) {
            isDragging = false;
            scrollContainer.style.cursor = 'grab';
            scrollContainer.style.userSelect = 'auto';
        }
    });
    
    // –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
    scrollContainer.addEventListener('mousemove', (e) => {
        if (!isDragging) return;
        e.preventDefault();
        const x = e.pageX - scrollContainer.offsetLeft;
        const walk = (x - startX) * 2; // –°–∫–æ—Ä–æ—Å—Ç—å –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
        scrollContainer.scrollLeft = scrollLeft - walk;
    });
}

// –í—ã–∑–æ–≤–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
document.addEventListener('DOMContentLoaded', () => {
    loadProducts(true);
    loadCategories();
    initDragScroll(); // –î–æ–±–∞–≤—å—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É
});

</script>
</body>
</html>
